(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[524],{3441:function(f,b,a){"use strict";a.d(b,{g:function(){return e}});var g=a(9762),c=a(1604),d=a(4592),h=a(7294);function i(){return(i=Object.assign?Object.assign.bind():function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c])}return d}).apply(this,arguments)}var j=["className","rows"],k=["h","minH","height","minHeight"],e=(0,c.Gp)(function(b,l){var e=(0,c.mq)("Textarea",b),a=(0,c.Lr)(b),m=a.className,f=a.rows,n=function(c,f){if(null==c)return{};var a,b,d={},e=Object.keys(c);for(b=0;b<e.length;b++)a=e[b],f.indexOf(a)>=0||(d[a]=c[a]);return d}(a,j),o=(0,g.Yp)(n),p=f?(0,d.CE)(e,k):e;return h.createElement(c.m$.textarea,i({ref:l,rows:f},o,{className:(0,d.cx)("chakra-textarea",m),__css:p}))});d.Ts&&(e.displayName="Textarea")},3161:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/issue/[id]",function(){return c(5613)}])},5011:function(e,b,a){"use strict";var f=a(7568),g=a(603),h=a(1351),c=a(4051),i=a.n(c),j=a(5893),k=a(8527),l=a(5193);a(7294);var d=a(1664),m=a.n(d),n=a(6277),o=a(6252),p=a(1163);b.Z=function(a){var a=null!==a?a:(0,h.Z)(TypeError("Cannot destructure undefined")),r=(0,p.useRouter)(),c=(0,n.UE)(),b=c.data,e=c.loading,s=(0,o.x)(),d=(0,g.Z)((0,n._y)(),2),t=d[0],q=d[1].loading;return(0,j.jsxs)(k.kC,{bg:"teal.400",p:2,children:[(0,j.jsx)(m(),{href:"/",children:(0,j.jsx)(k.rU,{children:(0,j.jsx)(k.xv,{color:"white",fontSize:25,ml:"3",mt:2,fontWeight:"bold",fontFamily:"comic-sans",children:"Issue Tracker"})})}),(0,j.jsx)(k.xu,{ml:"auto",p:2,children:!e&&(null==b?void 0:b.me)?(0,j.jsxs)(k.kC,{children:[(0,j.jsx)(k.xu,{mr:5,children:b.me.username}),(0,j.jsx)(l.zx,{onClick:(0,f.Z)(i().mark(function a(){return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r.push("/"),t(),a.next=4,s.resetStore();case 4:case"end":return a.stop()}},a)})),variant:"link",isLoading:q,children:"logout"})]}):(0,j.jsx)("div",{children:"loading"})})]})}},5613:function(n,d,a){"use strict";a.r(d),a.d(d,{default:function(){return W}});var o=a(603),p=a(5893),q=a(837),c=a(1604),b=a(4592),f=a(7294),r=a(4697);function s(){return(s=Object.assign?Object.assign.bind():function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c])}return d}).apply(this,arguments)}function t(c,f){if(null==c)return{};var a,b,d={},e=Object.keys(c);for(b=0;b<e.length;b++)a=e[b],f.indexOf(a)>=0||(d[a]=c[a]);return d}function u(a){var g=a.loading,b=a.src,h=a.srcSet,i=a.onLoad,j=a.onError,k=a.crossOrigin,l=a.sizes,c=a.ignoreFallback,d=(0,f.useState)("pending"),e=d[0],n=d[1];(0,f.useEffect)(function(){n(b?"loading":"pending")},[b]);var o=(0,f.useRef)(),m=(0,f.useCallback)(function(){if(b){p();var a=new Image;a.src=b,k&&(a.crossOrigin=k),h&&(a.srcset=h),l&&(a.sizes=l),g&&(a.loading=g),a.onload=function(a){p(),n("loaded"),null==i||i(a)},a.onerror=function(a){p(),n("failed"),null==j||j(a)},o.current=a}},[b,k,h,l,i,j,g]),p=function(){o.current&&(o.current.onload=null,o.current.onerror=null,o.current=null)};return(0,r.a)(function(){if(!c)return"loading"===e&&m(),function(){p()}},[e,m,c]),c?"loaded":e}var v=["htmlWidth","htmlHeight","alt"],w=["fallbackSrc","fallback","src","srcSet","align","fit","loading","ignoreFallback","crossOrigin","fallbackStrategy","referrerPolicy"],g=f.forwardRef(function(a,b){var c=a.htmlWidth,d=a.htmlHeight,e=a.alt,g=t(a,v);return f.createElement("img",s({width:c,height:d,ref:b,alt:e},g))});b.Ts&&(g.displayName="NativeImage");var h=(0,c.Gp)(function(a,o){var d,e,h=a.fallbackSrc,i=a.fallback,p=a.src,q=a.srcSet,r=a.align,v=a.fit,j=a.loading,x=a.ignoreFallback,y=a.crossOrigin,k=a.fallbackStrategy,z=a.referrerPolicy,l=t(a,w),m=null!=j||x||!(void 0!==h|| void 0!==i),A=(d=u(s({},a,{ignoreFallback:m})),e=void 0===k?"beforeLoadOrError":k,"loaded"!==d&&"beforeLoadOrError"===e||"failed"===d&&"onError"===e),n=s({ref:o,objectFit:v,objectPosition:r},m?l:(0,b.CE)(l,["onError","onLoad"]));return A?i||f.createElement(c.m$.img,s({as:g,className:"chakra-image__placeholder",src:h},n)):f.createElement(c.m$.img,s({as:g,src:p,srcSet:q,crossOrigin:y,loading:j,referrerPolicy:z,className:"chakra-image"},n))});b.Ts&&(h.displayName="Image");var x=a(6450);function y(c,f){if(null==c)return{};var a,b,d={},e=Object.keys(c);for(b=0;b<e.length;b++)a=e[b],f.indexOf(a)>=0||(d[a]=c[a]);return d}function z(){return(z=Object.assign?Object.assign.bind():function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c])}return d}).apply(this,arguments)}var A=["name","getInitials"],B=["src","srcSet","name","showBorder","borderRadius","onError","getInitials","icon","iconLabel","loading","children","borderColor","ignoreFallback"],e=(0,c.eC)("Avatar"),C=e[0],D=e[1],i=(0,c.Gp)(function(a,d){var e=D(),g=z({position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",insetEnd:"0",bottom:"0"},e.badge);return f.createElement(c.m$.div,z({ref:d},a,{className:(0,b.cx)("chakra-avatar__badge",a.className),__css:g}))});function E(d){var b=d.split(" "),a=b[0],c=b[1];return a&&c?""+a.charAt(0)+c.charAt(0):a.charAt(0)}b.Ts&&(i.displayName="AvatarBadge");var F=function(a){var b=a.name,d=a.getInitials,e=y(a,A),g=D();return f.createElement(c.m$.div,z({role:"img","aria-label":b},e,{__css:g.label}),b?null==d?void 0:d(b):null)},G=function(a){return f.createElement(c.m$.svg,z({viewBox:"0 0 128 128",color:"#fff",width:"100%",height:"100%",className:"chakra-avatar__svg"},a),f.createElement("path",{fill:"currentColor",d:"M103,102.1388 C93.094,111.92 79.3504,118 64.1638,118 C48.8056,118 34.9294,111.768 25,101.7892 L25,95.2 C25,86.8096 31.981,80 40.6,80 L87.4,80 C96.019,80 103,86.8096 103,95.2 L103,102.1388 Z"}),f.createElement("path",{fill:"currentColor",d:"M63.9961647,24 C51.2938136,24 41,34.2938136 41,46.9961647 C41,59.7061864 51.2938136,70 63.9961647,70 C76.6985159,70 87,59.7061864 87,46.9961647 C87,34.2938136 76.6985159,24 63.9961647,24"}))},H={display:"inline-flex",alignItems:"center",justifyContent:"center",textAlign:"center",textTransform:"uppercase",fontWeight:"medium",position:"relative",flexShrink:0},j=(0,c.Gp)(function(d,o){var e=(0,c.jC)("Avatar",d),a=(0,c.Lr)(d),p=a.src,q=a.srcSet,r=a.name,s=a.showBorder,g=a.borderRadius,h=void 0===g?"full":g,t=a.onError,i=a.getInitials,j=a.icon,u=void 0===j?f.createElement(G,null):j,l=a.iconLabel,v=a.loading,w=a.children,m=a.borderColor,x=a.ignoreFallback,A=y(a,B),n=z({borderRadius:h,borderWidth:s?"2px":void 0},H,e.container);return m&&(n.borderColor=m),f.createElement(c.m$.span,z({ref:o},A,{className:(0,b.cx)("chakra-avatar",d.className),__css:n}),f.createElement(C,{value:e},f.createElement(k,{src:p,srcSet:q,loading:v,onError:t,getInitials:void 0===i?E:i,name:r,borderRadius:h,icon:u,iconLabel:void 0===l?" avatar":l,ignoreFallback:x}),w))});b.Ts&&(j.displayName="Avatar");var k=function(a){var b=a.src,g=a.srcSet,h=a.onError,i=a.getInitials,d=a.name,j=a.borderRadius,k=a.loading,l=a.iconLabel,e=a.icon,m=void 0===e?f.createElement(G,null):e,n=a.ignoreFallback,o=a.referrerPolicy,p=u({src:b,onError:h,ignoreFallback:n});return b&&"loaded"===p?f.createElement(c.m$.img,{src:b,srcSet:g,alt:d,referrerPolicy:o,className:"chakra-avatar__img",loading:k,__css:{width:"100%",height:"100%",objectFit:"cover",borderRadius:j}}):d?f.createElement(F,{className:"chakra-avatar__initials",getInitials:i,name:d}):f.cloneElement(m,{role:"img","aria-label":l})};b.Ts&&(k.displayName="AvatarImage");var I=["children","borderColor","max","spacing","borderRadius"],l=(0,c.Gp)(function(e,k){var l=(0,c.jC)("Avatar",e),a=(0,c.Lr)(e),m=a.children,t=a.borderColor,d=a.max,h=a.spacing,n=void 0===h?"-0.75rem":h,i=a.borderRadius,o=y(a,I),g=(0,x.WR)(m),p=d?g.slice(0,d):g,j=null!=d&&g.length-d,q=p.reverse(),r=q.map(function(a,d){var c,g={marginEnd:0===d?0:n,size:e.size,borderColor:null!=(c=a.props.borderColor)?c:t,showBorder:!0};return f.cloneElement(a,(0,b.YU)(g))}),s=z({borderRadius:void 0===i?"full":i,marginStart:n},H,l.excessLabel);return f.createElement(c.m$.div,z({ref:k,role:"group",__css:{display:"flex",alignItems:"center",justifyContent:"flex-end",flexDirection:"row-reverse"}},o,{className:(0,b.cx)("chakra-avatar__group",e.className)}),j>0&&f.createElement(c.m$.span,{className:"chakra-avatar__excess",__css:s},"+"+j),r)});b.Ts&&(l.displayName="AvatarGroup");var J=a(8527),K=a(5193),L=a(894),M=a(1163),N=a(5011),O=a(7568),m=a(4051),P=a.n(m),Q=a(6252),R=a(9762),S=a(3441),T=a(2175),U=a(6277),V=function(){var a,b=(0,o.Z)((0,U.pj)(),1)[0],c=(0,Q.x)();return(0,p.jsx)(T.J9,{initialValues:{text:""},onSubmit:(a=(0,O.Z)(P().mark(function a(d){var e;return P().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b({variables:d});case 2:return e=a.sent,a.next=5,c.resetStore();case 5:case"end":return a.stop()}},a)})),function(b){return a.apply(this,arguments)}),children:function(a){return(0,p.jsxs)(T.l0,{children:[(0,p.jsx)(R.NI,{isRequired:!0,children:(0,p.jsx)(T.gN,{as:S.g,placeholder:"write...",id:"text",name:"text",type:"text",variant:"filled",w:1300})}),(0,p.jsx)(K.zx,{mt:3,colorScheme:"teal",isLoading:a.isSubmitting,type:"submit",children:"Post"})]})}})},W=function(){var b,c=(0,M.useRouter)(),f="string"==typeof c.query.id?parseInt(c.query.id):-1,d=(0,U.UE)().data,e=(0,U.iO)({variables:{id:f}}),a=e.data,g=e.loading,i=(0,o.Z)((0,U.ts)(),1)[0];if(g||!a)return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(N.Z,{}),(0,p.jsx)("div",{children:"loading..."})]});var h=new Date(parseInt(null==a?void 0:a.issue.createdAt));return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(N.Z,{}),(0,p.jsxs)(J.kC,{mx:"auto",mt:5,w:1300,children:[(0,p.jsx)(J.X6,{fontSize:45,children:null==a?void 0:a.issue.title}),(0,p.jsx)(J.LZ,{}),"open"===a.issue.status?(null==d?void 0:null===(b=d.me)|| void 0===b?void 0:b.userId)===a.issue.project.ownerId?(0,p.jsx)(K.zx,{size:"lg",leftIcon:(0,p.jsx)(q.rE,{color:"green"}),onClick:function(){return i()},children:"Close Issue"}):(0,p.jsxs)(K.zx,{size:"lg",variant:"outline",fontWeight:"bold",children:[(0,p.jsx)(L.JO,{viewBox:"0 0 200 200",color:"red.500",mr:1,my:"auto",children:(0,p.jsx)("path",{fill:"currentColor",d:"M 100, 100 m -75, 0 a 75,75 0 1,0 150,0 a 75,75 0 1,0 -150,0"})}),"Open"]}):(0,p.jsxs)(K.zx,{size:"lg",variant:"outline",fontWeight:"bold",children:[(0,p.jsx)(q.rE,{mr:2}),"Closed"]})]}),(0,p.jsxs)(J.kC,{mx:"auto",mt:5,w:1300,children:[(0,p.jsxs)(J.xv,{mt:2.5,color:"gray.700",fontSize:18,children:["Raised by: ",null==a?void 0:a.issue.raisedBy]}),(0,p.jsx)(J.LZ,{}),(0,p.jsx)(J.xu,{children:(0,p.jsxs)(J.xv,{color:"gray.500",children:["Created at: ",h.toDateString()]})})]}),a.issue.text?(0,p.jsx)(J.kC,{mx:"auto",mt:7,w:1300,children:(0,p.jsxs)(J.xu,{w:1300,children:[(0,p.jsx)(J.X6,{fontSize:25,children:"Description"}),(0,p.jsx)(J.xv,{mt:4,children:a.issue.text})]})}):null,(0,p.jsx)(J.X6,{fontSize:30,mx:"auto",mt:10,w:1300,children:"Discussion"}),a.issue.comments?a.issue.comments.map(function(a){return(0,p.jsx)(J.kC,{mx:"auto",mt:5,w:1300,children:(0,p.jsx)(J.xu,{w:1300,p:6,rounded:"md",h:"auto",borderWidth:2,textAlign:"left",children:(0,p.jsxs)(J.kC,{children:[(0,p.jsx)(j,{}),(0,p.jsxs)(J.xu,{ml:5,children:[(0,p.jsx)(J.xv,{fontWeight:"bold",children:a.commentedBy}),(0,p.jsx)(J.xv,{color:"gray.500",children:a.commentedOn}),(0,p.jsx)(J.xv,{children:a.text})]})]})})})}):(0,p.jsx)("div",{children:"loading.."}),(0,p.jsx)(J.kC,{mx:"auto",mt:5,w:1300,mb:5,children:(0,p.jsx)(V,{})})]})}},1351:function(c,a,b){"use strict";function d(a){throw a}b.d(a,{Z:function(){return d}})}},function(a){a.O(0,[460,664,837,277,774,888,179],function(){var b;return a(a.s=3161)}),_N_E=a.O()}])