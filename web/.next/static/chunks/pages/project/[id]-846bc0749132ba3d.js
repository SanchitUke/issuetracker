(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[142],{1244:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[id]",function(){return c(6514)}])},5011:function(e,b,a){"use strict";var f=a(7568),g=a(603),h=a(1351),c=a(4051),i=a.n(c),j=a(5893),k=a(8527),l=a(5193);a(7294);var d=a(1664),m=a.n(d),n=a(6277),o=a(6252),p=a(1163);b.Z=function(a){var a=null!==a?a:(0,h.Z)(TypeError("Cannot destructure undefined")),r=(0,p.useRouter)(),c=(0,n.UE)(),b=c.data,e=c.loading,s=(0,o.x)(),d=(0,g.Z)((0,n._y)(),2),t=d[0],q=d[1].loading;return(0,j.jsxs)(k.kC,{bg:"teal.400",p:2,children:[(0,j.jsx)(m(),{href:"/",children:(0,j.jsx)(k.rU,{children:(0,j.jsx)(k.xv,{color:"white",fontSize:25,ml:"3",mt:2,fontWeight:"bold",fontFamily:"comic-sans",children:"Issue Tracker"})})}),(0,j.jsx)(k.xu,{ml:"auto",p:2,children:!e&&(null==b?void 0:b.me)?(0,j.jsxs)(k.kC,{children:[(0,j.jsx)(k.xu,{mr:5,children:b.me.username}),(0,j.jsx)(l.zx,{onClick:(0,f.Z)(i().mark(function a(){return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r.push("/"),t(),a.next=4,s.resetStore();case 4:case"end":return a.stop()}},a)})),variant:"link",isLoading:q,children:"logout"})]}):(0,j.jsx)("div",{children:"loading"})})]})}},6514:function(e,b,a){"use strict";a.r(b),a.d(b,{default:function(){return C}});var f=a(5893),g=a(8527),h=a(5193),i=a(298),j=a(6356),k=a(1163),l=a(7294),m=a(5011),n=a(6277),c=a(1664),o=a.n(c),p=a(7568),q=a(603),r=a(1351),d=a(4051),s=a.n(d),t=a(7375),u=a(2115),v=a(9762),w=a(4612),x=a(6252),y=a(2175),z=a(837),A=function(a){var c,a=null!==a?a:(0,r.Z)(TypeError("Cannot destructure undefined")),k=(0,q.Z)((0,n.xH)(),1)[0],b=(0,t.qY)(),d=b.isOpen,e=b.onOpen,g=b.onClose,i=l.useRef(null),j=l.useRef(null),m=(0,x.x)();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(h.hU,{"aria-label":"Add to friends",onClick:e,icon:(0,f.jsx)(z.dt,{})}),(0,f.jsxs)(u.u_,{initialFocusRef:i,finalFocusRef:j,isOpen:d,onClose:g,children:[(0,f.jsx)(u.ZA,{}),(0,f.jsxs)(u.hz,{children:[(0,f.jsx)(u.xB,{children:"Add a new member to the project"}),(0,f.jsx)(u.ol,{}),(0,f.jsx)(y.J9,{initialValues:{username:""},onSubmit:(c=(0,p.Z)(s().mark(function a(b,c){var d,e,f,g;return s().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=c.setErrors,a.next=4,k({variables:b});case 4:if(!((null===(e=(f=a.sent).data)|| void 0===e?void 0:e.addMember)!=="")){a.next=9;break}d({username:null===(g=f.data)|| void 0===g?void 0:g.addMember}),a.next=11;break;case 9:return a.next=11,m.resetStore();case 11:case"end":return a.stop()}},a)})),function(a,b){return c.apply(this,arguments)}),children:function(a){var c=a.handleSubmit,b=a.errors,d=a.touched,e=a.isSubmitting;return(0,f.jsxs)("form",{onSubmit:c,children:[(0,f.jsx)(u.fe,{pb:6,children:(0,f.jsxs)(v.NI,{isInvalid:!!b.username&&d.username,children:[(0,f.jsx)(v.lX,{htmlFor:"username",children:"User Name"}),(0,f.jsx)(y.gN,{as:w.II,id:"username",name:"username",type:"username",variant:"filled",validate:function(b){var a;return""===b&&(a="username cannot be empty"),a}}),(0,f.jsx)(v.J1,{children:b.username})]})}),(0,f.jsxs)(u.mz,{children:[(0,f.jsx)(h.zx,{type:"submit",colorScheme:"blue",mr:3,isLoading:e,children:"Add"}),(0,f.jsx)(h.zx,{onClick:g,children:"Cancel"})]})]})}})]})]})]})},B=function(c){var a=(0,t.qY)(),d=a.isOpen,e=a.onOpen,b=a.onClose;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(h.zx,{onClick:e,children:"Members"}),(0,f.jsxs)(u.u_,{isOpen:d,onClose:b,children:[(0,f.jsx)(u.ZA,{}),(0,f.jsxs)(u.hz,{children:[(0,f.jsx)(u.xB,{children:"Project Members"}),(0,f.jsx)(u.ol,{}),(0,f.jsx)(u.fe,{children:c.memberNames.map(function(a){return(0,f.jsx)("div",{children:a})})}),(0,f.jsx)(u.mz,{children:(0,f.jsx)(h.zx,{colorScheme:"blue",mr:3,onClick:b,children:"Close"})})]})]})]})},C=function(){var c,e=(0,k.useRouter)(),l=(0,n.UE)().data,p="string"==typeof e.query.id?parseInt(e.query.id):-1,q=(0,n.n5)({variables:{id:p}}),a=q.data;if(q.loading||!a)return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(m.Z,{}),(0,f.jsx)("div",{children:"loading..."})]});var t=new Date(parseInt(null==a?void 0:a.project.createdAt)),b=(Date.now()-parseInt(null==a?void 0:a.project.lastUpdate))/864e5,d=Math.floor(b).toString()+" days ago";Math.floor(b)||(b*=24,d=Math.floor(b).toString()+" hours ago",Math.floor(b)||(b*=60,d=Math.floor(b).toString()+" minutes ago"));var u=a.project.members.map(function(a){return a.username}),r=a.project.issues.filter(function(a){return"open"===a.status}),s=a.project.issues.filter(function(a){return"closed"===a.status});return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(m.Z,{}),(0,f.jsxs)(g.kC,{mx:"auto",mt:5,w:1300,children:[(0,f.jsx)(g.X6,{fontSize:45,children:null==a?void 0:a.project.name}),(0,f.jsx)(g.LZ,{}),(0,f.jsxs)(h.hE,{ml:4,mt:2,size:"lg",isAttached:!0,variant:"outline",children:[(0,f.jsx)(B,{memberNames:u}),(null==l?void 0:null===(c=l.me)|| void 0===c?void 0:c.userId)===a.project.ownerId?(0,f.jsx)(A,{}):null]}),(0,f.jsx)(o(),{href:{pathname:"/project/report-issue",query:{id:p}},children:(0,f.jsx)(h.zx,{ml:4,mt:2,size:"lg",bgColor:"red.300",children:"Report a bug"})})]}),(0,f.jsxs)(g.kC,{mx:"auto",mt:5,w:1300,children:[(0,f.jsxs)(g.xv,{mt:2.5,color:"gray.700",fontSize:18,children:["Owner: ",null==a?void 0:a.project.owner.username]}),(0,f.jsx)(g.LZ,{}),(0,f.jsxs)(g.xu,{children:[(0,f.jsxs)(g.xv,{color:"gray.500",children:["Created at: ",t.toDateString()]}),(0,f.jsxs)(g.xv,{color:"gray.500",children:["Last updated on: ",d]})]})]}),(0,f.jsxs)(i.mQ,{mx:"auto",mt:6,w:1300,children:[(0,f.jsxs)(i.td,{children:[(0,f.jsx)(i.OK,{children:"Open"}),(0,f.jsx)(i.OK,{children:"Closed"})]}),(0,f.jsxs)(i.nP,{children:[(0,f.jsx)(i.x4,{children:r?r.map(function(a){return(0,f.jsx)(g.kC,{children:(0,f.jsx)(o(),{href:{pathname:"project/issue/[id].tsx",query:{projectId:p}},as:"/project/issue/".concat(a.id),children:(0,f.jsx)(g.xu,{as:"button",w:1300,p:4,rounded:"md",h:"auto",borderWidth:2,textAlign:"left",mt:1,children:(0,f.jsxs)(g.kC,{children:[(0,f.jsx)(g.xu,{children:a.title}),(0,f.jsx)(g.LZ,{}),"low"===a.priority?(0,f.jsx)(j.Vp,{colorScheme:"green",fontWeight:"bold",children:"Low"}):null,"medium"===a.priority?(0,f.jsx)(j.Vp,{colorScheme:"yellow",fontWeight:"bold",children:"Medium"}):null,"high"===a.priority?(0,f.jsx)(j.Vp,{colorScheme:"red",fontWeight:"bold",children:"High"}):null]})},a.id)})})}):(0,f.jsx)("div",{children:"loading.."})}),(0,f.jsx)(i.x4,{children:s?s.map(function(a){return(0,f.jsx)(g.kC,{children:(0,f.jsx)(o(),{href:{pathname:"project/issue/[id].tsx",query:{projectId:p}},as:"/project/issue/".concat(a.id),children:(0,f.jsx)(g.xu,{as:"button",w:1300,p:4,rounded:"md",h:"auto",borderWidth:2,textAlign:"left",textColor:"gray.600",children:a.title},a.id)})})}):(0,f.jsx)("div",{children:"loading.."})})]})]}),(0,f.jsx)(g.xu,{mx:"auto",mt:6,w:1300})]})}}},function(a){a.O(0,[460,664,954,837,212,277,774,888,179],function(){var b;return a(a.s=1244)}),_N_E=a.O()}])